<!DOCTYPE html>

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/sf-pro-display" rel="stylesheet">

    <link rel="stylesheet" href="styles/user.css">
    <link rel="stylesheet" href="styles/src.css">
    <link rel="stylesheet" href="styles/item.css">
    <link rel="stylesheet" href="styles/viewports.css">

    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="icon" href="./static/ico/icon.png">
    <link rel="shortcut icon" href="./static/ico/icon.png">
    <meta charset="UTF-8">

    <title>D2Synergy</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#252525">
    <meta name="title" content="D2 Synergy">
    <meta name="description" content="Optimises progress for best efficiency.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="D2 Synergy">
    <meta property="og:url" content="https://d2synergy.com/user">
    <meta property="og:image" content="https://d2synergy.com/static/images/embed.png">
    <meta property="og:description" content="Optimises progress for best efficiency.">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="D2 Synergy">
    <meta name="twitter:image" content="https://d2synergy.com/static/images/embed.png">
    <meta property="twitter:description" content="Optimises progress for best efficiency.">
</head>

<body>

    <div id="loadpopupBackplate"></div>

    <div id="loadpopupContainer">
        <div id="colorBar"></div>

        <div class="loadpopupContent">
            
            <div id="firstTimeLoadPopupContent">
                <div style="font-size: 30px;">First Time?</div>
                <div style="margin-top: 5px;font-size: 16px;">
                    It seems this is your first time using D2 Synergy!
                    <br><br>
                    Here are some resources to get started:<br>
                    Submit an issue <a class="hyperlinkBlue" href="" target="_blank">here</a><br>
                    Suggest a feature <a class="hyperlinkBlue" href="" target="_blank">here</a><br>
                    User guide <a class="hyperlinkBlue" href="" target="_blank">here</a>
                    <br><br>
                    <span style="font-weight: 600;">Note:</span> This is still in Alpha, so it won‚Äôt work as expected all the time. Please do submit an issue or let me know if you find a bug ‚ù§Ô∏è‚Äç
                </div>
                <div class="popupUnderline"></div>
            </div>

            <div class="whatsNewPopupContent">
                <div style="display: flex;gap: 5px;">
                    <div style="font-size: 30px;">What's New</div>
                    <div id="popupVersion">0.0.0</div>
                </div>
                <div style="margin-top: 5px;font-size: 16px;">
                    <ul id="whatsNewFeaturesList">
                        <li>Re-designed the navigation bar</li>
                        <li>Added a help button in the navigation bar</li>
                        <li>New font!</li>
                        <li>Added a toggle that lets you swap between xp values with or without modifiers</li>
                        <li>Added yield stats for artifacts</li>
                        <li>Added support for the shared wisdom XP modifier</li>
                        <li>A new PWA is available that you can download via any browser on all platforms!</li>
                        <li>üõ†Ô∏è Bug fixes</li>
                    </ul>
                </div>
            </div>

            <div id="popupDismissButton" class="uiButton bottomRight" style="margin-bottom: 20px;margin-right: 20px;">
                <div>Dismiss</div>
                <img style="margin-top: 1px;margin-left: 125px;width: 20px;" src="./static/ico/arrow_narrow_right.svg">
            </div>

        </div>
    </div>

    <div id="topColorBar"></div>

    <!-- Other viewports navbar (ie Desktop/Laptop) -->
    <div id="navBarContainer">

        <div id="navBarTitleContainer">
            <img id="navBarIcon" src="./static/ico/icon.png">
            <div id="navBarTitle">D2 Synergy</div>
            <a id="navBarVersion" href="https://github.com/brendanprice2003/D2-Synergy/commits/main" target="_blank">Alpha v0.5.7</a>
        </div>

        <div id="middleNavBarItems">
            <div class="middleNavbarItemContainer">
                <div data-containerName="bountiesContainer" id="navBarBountiesButton">Bounties</div>
                <!-- <img class="middleNavbarItemUi" src="./static/ico/ui_line.svg"> -->
            </div>
            <div class="middleNavbarItemContainer">
                <div data-containerName="seasonalChallengesContainer" id="navBarChallengesButton">Seasonal Challenges</div>
                <!-- <img class="middleNavbarItemUi" src="./static/ico/ui_dot.svg"> -->
            </div>
            <div class="middleNavbarItemContainer">
                <div data-containerName="statisticsContainer" id="navBarStatisticsButton">Statistics</div>
                <!-- <img class="middleNavbarItemUi" src="./static/ico/ui_line.svg"> -->
            </div>
        </div>

        <div id="rightNavBarItems">
            <img href="https://github.com/brendanprice2003/D2-Synergy/wiki/User-Guide" target="_blank" class="navBarIcons" id="navBarHelpIcon" src="./static/ico/ui_help.svg">
            <img class="navBarIcons" id="navBarSettingsIcon" src="./static/ico/settings.svg">
            <img class="navBarIcons" id="navBarLogoutIcon" src="./static/ico/logout.svg">
        </div>
    </div>

    <!-- Mobile navbar -->
    <div id="bottomMiddleNavBarItems">
        <div data-containerName="bountiesContainer" class="bottomNavBarIconContainer" id="bountiesMenuMobile">
            <img class="bottomNavBarIcons" src="./static/ico/destiny-icons/pursuits.svg">
            <div>Bounties</div>
        </div>
        <div data-containerName="seasonalChallengesContainer" class="bottomNavBarIconContainer" id="seasonalMenuMobile">
            <img class="bottomNavBarIcons" src="./static/ico/destiny-icons/meditations.svg">
            <div>Seasonal</div>
        </div>
        <div data-containerName="statisticsContainer" class="bottomNavBarIconContainer" id="statsMenuMobile" style="display: none;">
            <img class="bottomNavBarIcons" src="./static/ico/destiny-icons/vault.svg">
            <div>Statistics</div>
        </div>
        <div class="bottomNavBarIconContainer" id="contextMenuSettingsMobile">
            <img class="bottomNavBarIcons" src="./static/ico/more_dots.svg">
            <div style="padding-bottom: 4px;">More</div>
        </div>
    </div>

    <!-- Main container for content -->
    <div id="userMainContainer">

        <!-- Settings container -->
        <div id="settingsGrid">
            <div id="settingsContainerMobile">
                <div id="settingsBackButtonContainer">
                    <img id="settingsBackArrow" src="./static/ico/arrow_right.svg">
                    <div id="settingsBackArrowSubtext">Go Back</div>
                </div>
                <h1>Settings</h1>
                <div id="settingCategoriesMobile">
                    <div class="settingCategory" id="GeneralSettingsButton">
                        <div>General</div>
                        <div id="categorySubtext">Defaults & Functionality</div>
                        <img id="categorySelectArrow" src="./static/ico/arrow_right.svg">
                    </div>
                    <div class="settingCategory" id="AccessibilitySettingsButton">
                        <div>Accessibility</div>
                        <div id="categorySubtext">Images, Text Sizes & Colors</div>
                        <img id="categorySelectArrow" src="./static/ico/arrow_right.svg">
                    </div>
                    <div class="settingCategory" id="LogoutSettingsButton">
                        <div>Other</div>
                        <div id="categorySubtext">Clear browser cache & <span style="color: #ed4d4dc3;">logout</span></div>
                        <img id="categorySelectArrow" src="./static/ico/arrow_right.svg">
                    </div>
                    <div style="display: flex;gap: 10px;">
                        <a id="settingBottomCategories" href="https://github.com/brendanprice2003/D2-Synergy/wiki" target="_blank">Help</a>
                    </div>
                    <div id="settingsFooterVersionContainer">
                        <div style="display: flex;">
                            <div style="margin-bottom: 5px;color: rgb(90, 90, 90);">Version: &nbsp;</div>
                            <div style="color: rgb(90, 90, 90);" id="settingsFooterVersionField"></div>
                        </div>
                    </div>
                </div>
            </div>
    
            <div id="settingsSubMenuContainer">
                <div id="settingsSubMenuBackButtonContainer">
                    <img id="settingsBackArrow" src="./static/ico/arrow_right.svg">
                    <div id="settingsBackArrowSubtext">Go Back</div>
                </div>
                <div id="generalSettingsContainer" style="display: none;">
                    <h1 class="settingsHeading">General Settings</h1>
                    <hr>
                    <div class="settingSection">
                        <h2>General Options</h2>
                        <div style="display: flex;flex-direction: column;gap: 5px;">
                            <label class="labelContainer">
                                <input type="checkbox" id="checkboxRefreshWhenFocused" class="settingCheckbox">
                                <div class="checkboxLabel">Refresh data when browser tab is focused</div>
                            </label>
                            <label class="labelContainer">
                                <input type="checkbox" id="checkboxRefreshOnInterval" class="settingCheckbox">
                                <div class="checkboxLabel">Refresh data every 5 minutes</div>
                            </label>
                            <label class="labelContainer" id="defaultViewDropdownContainer">
                                Default Page
                                <select id="defaultViewDropdown">
                                    <option value="bountiesContainer">Bounties</option>
                                    <option value="seasonalChallengesContainer">Seasonal Challenges</option>
                                    <option value="statisticsContainer" style="display: none;">Statistics</option>
                                </select>
                            </label>
                            <label class="labelContainer">
                                <input type="checkbox" id="checkboxRememberLastpage" class="settingCheckbox">
                                <div class="checkboxLabel">Remember last visited page</div>
                            </label>
                            <label class="labelContainer" style="margin-top: 15px;">
                                <input type="checkbox" id="checkboxShowPopup" class="settingCheckbox">
                                <div class="checkboxLabel">Show "What's New" popup</div>
                            </label>
                        </div>
                    </div>
                    <hr>
                    <div id="settingsSecretContainer" style="display: none;">
                        <div class="settingSection">
                            <h2>Secret</h2>
                            <label class="labelContainer">
                                <input type="checkbox" id="checkboxUseSecretIcons" class="settingCheckbox">
                                <div class="checkboxLabel">Currently doesn't do anything. How'd you find this anyways..</div>
                            </label>
                        </div>
                        <hr>
                    </div>
                </div>

                <div id="accessibilitySettingsContainer" style="display: none;">
                    <h1 class="settingsHeading">Accessibility Settings</h1>
                    <div style="margin-top: 5px;margin-left: 20px;margin-right: 20px;color: gray;font-size: var(--fontSizeTooltipSmall);">
                        The default sizes are recommended as they give the best clarity for all screen sizes
                    </div>
                    <div class="settingSection" style="display: none;">
                        <div id="accessibilityTextDemo" style="padding: 10px;background-color: rgb(60, 60, 60);border-radius: 5px;border: 1px solid gray;">
                            Whether we wanted it or not, we've stepped into a war with the Cabal on Mars. So let's get to taking out their command, one by one.
                        </div>
                    </div>
                    <!-- <hr> -->
                    <div class="settingSection" style="display: none;">
                        <h2>Font Size</h2>
                        <label class="labelRangeContainer">
                            <input type="range" id="accessibilityFontSizeSlider" class="settingRange" min="0" max="2" value="0">
                            <div>
                                <div style="margin-top: 4px;float: left;">Aa</div>
                                <div style="font-size: 22px;float: right;">Aa</div>
                            </div>
                        </label>
                        <div class="settingsResetUIButton" id="accessibilityFontSizeReset">Reset</div>
                    </div>
                    <hr>
                    <div class="settingSection" style="min-height: 250px;max-height: 250px;">
                        <h2>Item Size</h2>
                        <label class="labelRangeContainer">
                            <input type="range" id="accessibilityImageSizeSlider" class="settingRange" min="45" max="65" value="55">
                            <div>
                                <div style="margin-top: 4px;float: left;">45px</div>
                                <div style="margin-top: 4px;float: right;">65px</div>
                            </div>
                        </label>
                        <div style="margin-top: 20px;">
                            <div style="font-weight: 600;font-size: var(--fontSizeContent);">Item Preview</div>
                            <div style="display: flex;gap: 15px;">
                                <img id="accessibilityImageDemo" src="./static/images/bounty_image.png">
                                <div class="settingsResetUIButton" id="accessibilityImageDemoReset">Reset</div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="settingSection">
                        <h2>Accent</h2>
                        <div style="display: flex;gap: 15px;">
                            <div data-color="#ED4D4D" class="settingsAccentColorButton" style="background-color: #ED4D4D;"></div>
                            <div data-color="#4747ff" class="settingsAccentColorButton" style="background-color: #4747ff;"></div>
                            <div data-color="#308c30" class="settingsAccentColorButton" style="background-color: #308c30;"></div>
                            <div data-color="#ffff4b" class="settingsAccentColorButton" style="background-color: #ffff4b;"></div>
                            <div data-color="#932b93" class="settingsAccentColorButton" style="background-color: #932b93;"></div>
                        </div>
                        <div style="margin-top: 25px;">
                            <div style="margin-bottom: 10px;font-style: italic;font-size: var(--fontSizeContent);">I want my own color!</div>
                            <label>
                                <input type="color" id="settingCustomColorInput" value="#ED4D4D" style="cursor: pointer;">
                            </label>
                        </div>
                        <div class="settingsResetUIButton" id="accessibilityAccentColorReset">Reset</div>
                    </div>
                    <!-- <hr id="bottomDivider"> -->
                </div>

                <div id="logoutSettingsContainer" style="display: none;">
                    <div class="settingSection">
                        <h2>Additional Options</h2>
                        <div style="display: flex;gap: 15px;">
                            <div class="generalButton" id="clearCacheSettingsButton" style="background-color: rgb(50, 50, 50);">Clear Cache</div>
                            <div class="generalButton" id="logoutSettingsButton" style="background-color: rgba(240, 70, 70, 0.8);">Logout</div>
                        </div>
                        <div style="margin-top: 10px;color: gray;font-size: var(--fontSizeTooltipSmall);">
                            Clearing cache will reset settings and clear definitions cache
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="subContainer">

            <!-- Shows whilst loading -->
            <div id="skeletonLoadContainer">
                <div id="one">
                    <div id="skeletonCellLeft"></div>
                    <div id="skeletonSubContainer">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
                <div id="two">
                    <div id="skeletonSubContainer">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
            </div>

            <!-- All main content -->
            <div id="containerThatHasTheSideSelectionAndContentDisplay">

                <div id="sideSelectionContainer">
                    <div id="characterSelectContainer">
    
                        <div id="mobileCharacterSelect">
                            <img id="mobileCharacterEmblem" src="static/images/emblem1.jpg">
                            <div id="mobileCharacterInfoContainer">
                                <div id="mobileCharacterSubInfoContainer">
                                    <div id="mobileCharacterTypeField">Warlock</div>
                                    <div style="display: flex;gap: 3px;">
                                        <img src="static/ico/destiny-icons/power.svg" style="width: 5%;padding: 0;">
                                        <div id="mobileCharacterPowerLevelField">9999</div>
                                    </div>
                                </div>
                                <img src="static/ico/arrow_down.svg" id="mobileArrowDown">
                            </div>
                        </div>
        
                        <div id="defaultCharacterSelect">

                            <!-- DEPRECATED CHAR SELECT LAYOUT -->
                            <div style="display: none;">
                                <div>
                                    <img id="topCharacterSelectImg" src="static/images/emblem1.jpg">
                                    <div id="characterInfoContainer">
                                        <div id="characterSubInfoContainer">
                                            <div id="topCharacterTypeField"></div>
                                            <div style="display: flex;gap: 3px;">
                                                <img src="static/ico/destiny-icons/power.svg" style="width: 13px;padding: 0;">
                                                <div id="topCharacterPowerLevelField">----</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="characterSelectSlim" id="middleCharacterContainer">
                                    <img id="middleCharacterIconImg" style="margin-left: 5px;width:30px;">
                                    <div style="margin-top: 3px;margin-left: 5px;font-size: 20px;" id="middleCharacterTypeField"></div>
                                    <img src="static/ico/destiny-icons/power.svg" style="margin-left: 5px;width: 13px;padding: 0;">
                                    <div style="margin-top: 5px;margin-left: 5px;font-size: 17px;color: yellow;" id="middleCharacterPowerLevelField">----</div>
                                </div>
                                <div class="characterSelectSlim" id="bottomCharacterContainer" style="margin-top: 5px;">
                                    <img id="bottomCharacterIconImg" style="margin-left: 5px;width:30px;">
                                    <div style="margin-top: 3px;margin-left: 5px;font-size: 20px;" id="bottomCharacterTypeField"></div>
                                    <img src="static/ico/destiny-icons/power.svg" style="margin-left: 5px;width: 13px;padding: 0;">
                                    <div style="margin-top: 5px;margin-left: 5px;font-size: 17px;color: yellow;" id="bottomCharacterPowerLevelField">----</div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div id="dropdownsContainer">

                        <div>
                            <div id="dropdownYield" class="dropdownContainer">
                                <div style="color: gray;font-size: 14px;">Yield</div>
                                <hr class="dropdownLine">
                                <img src="./static/ico/arrow_down.svg" class="dropdownArrow" id="arrowYield">
                            </div>
                            <div id="yieldDropdownContainer">
                                <div id="dropdownContentXpContainer">

                                    <div class="userToggleContainer" style="display: flex;margin-bottom: 5px;">
                                        <label class="switchSmall">
                                            <input type="checkbox" id="checkboxUseModifiers">
                                            <span class="slider round"></span>
                                        </label>
                                        <div style="padding-top:1px;font-size: 13px;color: #858585;">Use modifiers</div>
                                    </div>

                                    <div class="userToggleContainer" style="display: none;margin-bottom: 5px;"> <!-- display: flex; -->
                                        <label class="switchSmall">
                                            <input type="checkbox" id="checkboxUseProfileWide">
                                            <span class="slider round"></span>
                                        </label>
                                        <div style="padding-top:1px;font-size: 13px;color: #858585;">Use profile-wide</div>
                                    </div>

                                    <div style="display: flex;gap: 5px;margin-bottom: 15px;padding-top: 10px;">
                                        <div>XP:</div>
                                        <div class="dropdownNumber" id="xpWithModField">000,000,000</div>
                                    </div>
                                    
                                    <div style="margin-top: -6px;margin-left: -7px;background-color: gray;border-radius: 10px;width: 20px;height:2px;transform: rotate(90deg);"></div>

                                    <div style="display: flex;gap: 5px;margin-bottom: 15px;margin-top: 10px;">
                                        <div>Season Pass Levels:</div>
                                        <div class="dropdownNumber" id="SeasonPassLevelsWithModField">000</div>
                                    </div>

                                    <div style="margin-top: -6px;margin-left: -7px;background-color: gray;border-radius: 10px;width: 20px;height:2px;transform: rotate(90deg);"></div>
                                        
                                    <div style="color: rgb(177, 177, 177);margin-top: 10px;">Artifact</div>
                                    <div style="display: flex;">
                                        <div>
                                            <div style="position: absolute;margin-top: -1px;margin-left: 1px;width: 10px;height: 18px;border-bottom-right-radius: 7px;border-bottom: 2px solid gray;border-right: 2px solid gray;transform: rotateY(180deg)"></div>
                                            <div style="position: absolute;margin-top: -1px;margin-left: 1px;width: 10px;height: 36px;border-bottom-right-radius: 7px;border-bottom: 2px solid gray;border-right: 2px solid gray;transform: rotateY(180deg)"></div>
                                            <div style="position: absolute;margin-top: 30px;margin-left: 1px;width: 10px;height: 36px;border-bottom-right-radius: 7px;border-bottom: 2px solid gray;border-right: 2px solid gray;transform: rotateY(180deg)"></div>
                                            <div style="position: absolute;margin-top: 16px;margin-left: 1px;width: 10px;height: 65px;border-bottom-right-radius: 7px;border-bottom: 2px solid gray;border-right: 2px solid gray;transform: rotateY(180deg)"></div>
                                        </div>
                                        <div style="margin-top: 8px;padding-left: 16px;">
                                            <div>
                                                <div>Power Bonus Levels:</div>
                                                <div style="display: flex;">
                                                    <div class="dropdownNumber" id="artifactPowerBonusProgressField">0</div>
                                                    <div class="dropdownNumber" id="artifactPowerBonusCeilingField">0</div>
                                                </div>
                                            </div>
                                            <div style="margin-top: 15px;">
                                                <div>Mod Levels:</div>
                                                <div style="display: flex;gap: 5px;">
                                                    <div class="dropdownNumber" id="artifactModLevelsProgressField">0</div>
                                                    <div class="dropdownNumber" id="artifactModLevelsCeilingField">0</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div style="width: 240px;">
                            <div id="dropdownModifiers" class="dropdownContainer">
                                <div style="color: gray;font-size: 14px;">Modifiers</div>
                                <hr class="dropdownLine">
                                <img src="./static/ico/arrow_down.svg" class="dropdownArrow" id="arrowModifiers">
                            </div>
                            <div id="modifiersDropdownContainer">
                                <div id="dropdownContentContainer">
                                    <div class="modifierContainer">
                                        <img class="modifierCheckmarkIcon" id="seasonPassBonusCheckmarkIcon" src="./static/ico/checkmark.svg">
                                        <div id="seasonPassBonusText">Season Pass Bonus</div>
                                        <div class="modifierValue" id="seasonPassBonusField">--</div>
                                    </div>
                                    <div class="modifierContainer">
                                        <img class="modifierCheckmarkIcon" id="sharedWisdomCheckmarkIcon" src="./static/ico/checkmark.svg">
                                        <div style="display: flex;">
                                            <div id="sharedWisdomBonusText">Shared Wisdom</div>
                                            <img id="warnIcon" src="./static/ico/warn_icon.svg">
                                        </div>
                                        <div class="modifierValue" id="sharedWisdomBonusField">--</div>
                                    </div>
                                    <div class="modifierContainer">
                                        <img class="modifierCheckmarkIcon" id="wellRestedCheckmarkIcon" src="./static/ico/checkmark.svg">
                                        <div id="wellRestedBonusText">Well Rested</div>
                                        <div class="modifierValue" id="wellRestedBonusField">--</div>
                                    </div>
                                    <div class="modifierContainer">
                                        <img class="modifierCheckmarkIcon" id="ghostModsCheckmarkIcon" src="./static/ico/checkmark.svg">
                                        <div id="ghostModsBonusText">Ghost Mods</div>
                                        <div class="modifierValue" id="ghostModBonusField">--</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="warnHoverContent" class="sharedWisdomWarningIcon">Join a fireteam for shared wisdom<div style="font-style: italic;color: gray;">(boots on ground)</div></div>

                        <div class="userToggleContainer">
                            <label class="switch">
                                <input type="checkbox" id="checkboxIncludeExpiredBountiesInYield">
                                <span class="slider round"></span>
                            </label>
                            <div style="padding-top:1px;">Include expired bounties in yield</div>
                        </div>
                        <div class="userToggleContainer">
                            <label class="switch">
                                <input type="checkbox" id="checkboxIncludeSeasonalChallengesInYield">
                                <span class="slider round"></span>
                            </label>
                            <div style="padding-top:1px;">Include unclaimed challenges in yield</div>
                        </div>

                    </div>
                </div>
    
                <div id="contentDisplay">
    
                    <div id="contentDisplayGridLayout">
                        <div class="contentDisplaySegment">

                            <div class="contentHeadingContainer">
                                <div class="contentHeading">Relations</div>
                                <div class="subHeadingContainer">
                                    <div id="relationsTotalField">420</div>
                                    <div>Relations</div> 
                                </div>
                            </div>

                            <hr class="contentHeadingSeperator"></hr>

                            <!-- old table layout -->
                            <div id="relationsTableContent">

                                <div id="tblCon">
                                    <table id="relationsTable">
                                        <tr>
                                            <th>Keyword</th>
                                            <th>Relation</th>
                                        </tr>
                                    </table>

                                </div>

                                <div id="noRelationsExistElement">
                                    <div id="noRelationsExistText">
                                        No (notable) relations exist.
                                        <br><br>
                                        Change some settings, pick up bounties, quests or wait until more seasonal challenges are available.
                                        <br><br><br>
                                        <div id="timeUntilWeeklyReset"></div>
                                    </div>
                                </div>

                            </div>




                            <!-- new table layout -->
                            <!-- flex -->
                            <div style="display: none;flex-direction: column;margin-top: 20px;">

                                <!-- heading row -->
                                <div class="tableHeadingRow tableRow">
                                    <div>Item Name</div>
                                    <div>Affinity</div>
                                    <div>Coverage %</div>
                                    <div>Relation Points</div>
                                </div>

                                <!-- content row -->
                                <hr class="tableRowSeperator"></hr>
                                <div class="tableContentRow tableRow">

                                    <div class="tableItemNameContainer">
                                        <div class="tableItemIconSquareContainer" style="background-color: #35648F;width: 26px !important;">
                                            <img src="./static/ico/destiny-icons/vanguard_icon.svg" class="tableItemIconImg">
                                        </div>
                                        <div class="tableItemNameFieldContainer">item name</div>
                                    </div>
                                    
                                    <div class="tableAffinitiesContainer">
                                        <div class="tableItemIconSquareContainer" style="background-color: #4DCF5F;">
                                            <img src="./static/ico/destiny-icons/vanguard_icon.svg" class="tableItemIconImg">
                                        </div>
                                        <div class="tableItemIconSquareContainer" style="background-color: #EACE3A;">
                                            <img src="./static/ico/destiny-icons/vanguard_icon.svg" class="tableItemIconImg">
                                        </div>
                                        <div class="tableItemIconSquareContainer tableItemIconSquareContainerNull"></div>
                                    </div>

                                    <div class="tableCoverageField">50%</div>
                                    <div class="tablePointsField">50</div>
                                </div>
                                <hr class="tableRowSeperator"></hr>
                            </div>


                            

                            <div class="affinitiesContainer">

                                <div class="contentHeadingContainer">
                                    <div class="contentHeading">Affinities</div>
                                </div>

                                <hr class="contentHeadingSeperator"></hr>

                                <div id="relationSquares">
                                    <div>
                                        <div class="relationSquareTitleContainers">
                                            <div class="relationSquareNormal" id="ActivityModeTitle">Activity</div>
                                            <img class="relationSquareIco" id="ActivityModeArrow" src="./static/ico/neutral_ring.svg">
                                        </div>
                                        <div class="relationSquareEmbed" id="ActivityModeText">--</div>
                                    </div>
                                    <div>
                                        <div class="relationSquareTitleContainers">
                                            <div class="relationSquareNormal" id="ItemCategoryTitle">Weapon</div>
                                            <img class="relationSquareIco" id="ItemCategoryArrow" src="./static/ico/neutral_ring.svg">
                                        </div>
                                        <div class="relationSquareEmbed" id="ItemCategoryText">--</div>
                                    </div>
                                    <div>
                                        <div class="relationSquareTitleContainers">
                                            <div class="relationSquareNormal" id="DamageTypeTitle">Affinity</div>
                                            <img class="relationSquareIco" id="DamageTypeArrow" src="./static/ico/neutral_ring.svg">
                                        </div>                   
                                        <div class="relationSquareEmbed" id="DamageTypeText">--</div>
                                    </div>
                                    <div>
                                        <div class="relationSquareTitleContainers">
                                            <div class="relationSquareNormal" id="KillTypeTitle">Type</div>
                                            <img class="relationSquareIco" id="KillTypeArrow" src="./static/ico/neutral_ring.svg">
                                        </div>           
                                        <div class="relationSquareEmbed" id="KillTypeText">--</div>
                                    </div>
                                    <div>
                                        <div class="relationSquareTitleContainers">
                                            <div class="relationSquareNormal" id="EnemyTypeTitle">Race</div>
                                            <img class="relationSquareIco" id="EnemyTypeArrow" src="./static/ico/neutral_ring.svg">
                                        </div>                
                                        <div class="relationSquareEmbed" id="EnemyTypeText">--</div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <!-- Toggles for relations table -->
                                <div class="userToggleContainer">
                                    <label class="switch">
                                        <input type="checkbox" id="checkboxIncludeSeasonalChallengesInTable">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="padding-top:1px;">Include seasonal challenges in table</div>
                                </div>

                                <div class="userToggleContainer">
                                    <label class="switch">
                                        <input type="checkbox" id="checkboxIncludeExpiredBountiesInTable">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="padding-top:1px;">Include expired bounties in table</div>
                                </div>

                                <div class="userToggleContainer">
                                    <label class="switch">
                                        <input type="checkbox" id="toggleTypePVP">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="padding-top:1px;">Include PvP in table</div>
                                </div>

                                <div class="userToggleContainer">
                                    <label class="switch">
                                        <input type="checkbox" id="toggleTypePVE">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="padding-top:1px;">Include PvE in table</div>
                                </div>

                                <div class="userToggleContainer">
                                    <label class="switch">
                                        <input type="checkbox" id="checkboxIncludeSeasonalChallengesInTable">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="display: flex;gap: 10px;">
                                        <div style="padding-top:1px;">Enforce relation types</div>
                                        <img class="userHelpHoverIcon" id="tooltipEnforceRelationAffinity" src="./static/ico/interface_help.webp">
                                    </div>
                                </div>
                                <div class="tooltipContainer" id="tooltipEnforceContent">Limit to relations between correlating keywords, instead of generalising all keywords in selection.</div>

                                <div class="userToggleContainer" id="bottomUserToggle">
                                    <label class="switch">
                                        <input type="checkbox" id="checkboxIncludeSeasonalChallengesInTable">
                                        <span class="slider round"></span>
                                    </label>
                                    <div style="display: flex;gap: 10px;">
                                        <div style="padding-top:1px;">Include single-point relations</div>
                                        <img class="userHelpHoverIcon" id="tooltipIncludeSinglePoints" src="./static/ico/interface_help.webp">
                                    </div>
                                </div>
                                <div class="tooltipContainer" id="tooltipIncludeSinglePointContent">Include relations that have one relation. -- A single point means it doesn't relate to anything! (besides itself)</div>
                            </div>
                        </div>

                        <div class="contentDisplaySegment mobileSecond">
                            <div id="bountiesContainer">

                                <div class="contentHeadingContainer">
                                    <div class="contentHeading">Bounties</div>
                                    <div style="display: flex;gap: 2px;">
                                        <div class="subHeadingContainer">
                                            <div id="bountiesTotalField">0</div>
                                            <div>Bounties</div>
                                        </div>
                                        <img src="./static/ico/dot.svg" class="subHeadingDotUI">
                                        <div class="subHeadingContainer">
                                            <div id="bountiesCompletedField">0</div>
                                            <div>Completed</div>
                                        </div>
                                        <img src="./static/ico/dot.svg" class="subHeadingDotUI">
                                        <div class="subHeadingContainer">
                                            <div id="bountiesExpiredField">0</div>
                                            <div>Expired</div>
                                        </div>
                                    </div>
                                </div>

                                <hr class="contentHeadingSeperator"></hr>

                                <div id="noBountiesTooltip">You don't have any bounties on this character.</div>
                                <div id="bountyItems"></div>
                                <div id="recommendationTooltip">Note: It is recommended that you have ~20 (completable) bounties.</div>
                            </div>
                            <div id="seasonalChallengesContainer">

                                <div class="contentHeadingContainer">
                                    <div class="contentHeading">Seasonal Challenges</div>
                                    <div style="display: flex;gap: 2px;">
                                        <div class="subHeadingContainer">
                                            <div id="challengesTotalField">0</div>
                                            <div>Challenges</div>
                                        </div>
                                        <img src="./static/ico/dot.svg" class="subHeadingDotUI">
                                        <div class="subHeadingContainer">
                                            <div id="challengesCompletedField">0</div>
                                            <div>Completed</div>
                                        </div>
                                    </div>
                                </div>

                                <hr class="contentHeadingSeperator"></hr>

                                <div class="seasonalChallengesUIContainer">
                                    <div class="seasonalChallengePageButton" id="previousSeasonalChallengePageButton">
                                        <img class="seasonalChallengeButtonIcon" id="previousSeasonalChallengeArrow" src="./static/ico/arrow_down.png">
                                    </div>
    
                                    <div id="seasonalChallengeItems"></div>
                                    
                                    <div class="seasonalChallengePageButton" id="nextSeasonalChallengePageButton">
                                        <img class="seasonalChallengeButtonIcon" id="nextSeasonalChallengeArrow" src="./static/ico/arrow_down.png">
                                    </div>
                                </div>
                                
                            </div>
                            <div id="statisticsContainer">
                                <div class="statsColumnContainer">
                                    <div class="statContainer">
                                        <div class="statHeadingContainer">
                                            <div class="statContainerSubheading" id="seasonNumberMetric">Season 00</div>
                                            <div class="statContainerMainHeading" id="seasonNameMetric">Season of Word</div>
                                        </div>
                                        <div class="statMetricsContainer">

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Season Pass</div>
                                                    <div class="metricHeading">Rank</div>
                                                </div>
                                                <div class="metricContainer">
                                                    <img style="width: 95px;margin-top: -3px;" id="seasonRankBackplate" src="./static/images/UI/season_rank_backplate.svg">
                                                    <div id="seasonRankMetric">----</div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Season Rank</div>
                                                    <div class="metricHeading">Next Rank</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Duo">
                                                        <div class="metricLarge" id="seasonPassRankProgressMetric">--,---</div>
                                                        <div class="metricSub">/100,000xp</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">All-time High</div>
                                                    <div class="metricHeading">Rank</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Single">
                                                        <div class="metricXLarge" id="highestSeasonPassRankMetric">-,---</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="display: none;">
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Season Pass</div>
                                                    <div class="metricHeading">Rewards</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_L.png">
                                                    <div class="backplateContainer-Quad">
                                                        <div>
                                                            <div class="metricSubSmall">Claimed Items</div>
                                                            <div id="seasonPassRewardsClaimedMetric">--</div>
                                                        </div>
                                                        <div>
                                                            <div class="metricSubSmall">Unclaimed Items</div>
                                                            <div id="seasonPassRewardsUnclaimedMetric">--</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="statContainer">
                                        <div class="statHeadingContainer">
                                            <div class="statContainerSubheading" id="seasonArtifactNameMetric">Lantern of Osiris</div>
                                            <div class="statContainerMainHeading">Seasonal Artifact</div>
                                        </div>
                                        <div class="statMetricsContainer">

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Artifact Power</div>
                                                    <div class="metricHeading">Power Bonus</div>
                                                </div>
                                                <div class="metricContainer">
                                                    <img style="width: 55px;margin-top: -5px;" id="artifactBonusBackplate" src="./static/images/UI/season_rank_backplate.svg">
                                                    <div style="margin-top: -40px;color: #00F0FF;" id="artifactBonusMetric">+--</div>
                                                </div>
                                                <div class="metricContainer" style="margin-top: 20px;">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_s.png">
                                                    <div class="backplateContainer-Duo" style="margin-top: -40px;">
                                                        <div class="metricMedium" style="font-size: 16px;" id="artifactPowerBonusProgressMetric">-,---,---</div>
                                                        <div class="metricMedium" style="font-size: 14px;color: #b9b9b9;" id="artifactPowerBonusCeilingMetric">/-,---,---xp</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Artifact Progress</div>
                                                    <div class="metricHeading">Perks</div>
                                                </div>
                                                <div class="metricContainer">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_s.png">
                                                    <div style="display: flex;margin-top: -35px;justify-content: center;">
                                                        <div class="metricLarge" id="artifactModUnlocksMetric">--</div>
                                                        <div class="metricSub" id="artifactModUnlocksCeilingMetric">/--</div>
                                                    </div>
                                                </div>
                                                <div class="metricContainer" style="margin-top: 12px;">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_sm.png">
                                                    <div class="backplateContainer-Duo" style="display: none;margin-top: -45px;" id="perkProgressTextContainer">
                                                        <div class="metricLarge" style="font-size: 16px;" id="artifactModUnlockProgressMetric">-,---,---</div>
                                                        <div class="metricSub" style="font-size: 14px;" id="artifactModUnlockProgressCeilingMetric">/-,---,---xp</div>
                                                    </div>
                                                    <div style="margin-top: -45px;" id="allModSlotsUnlockedTextContainer">
                                                        <div style="font-size: 14px;color: rgb(167, 167, 167);">All slots unlocked!</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">All-time High</div>
                                                    <div class="metricHeading">Power Bonus</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Single">
                                                        <div class="metricXLarge" id="highestPowerBonusMetric">--</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="statContainer" style="display: none;">
                                        <div class="statHeadingContainer">
                                            <div class="statContainerSubheading">Eververse Shloot</div>
                                            <div class="statContainerMainHeading">Bright Engram Progression</div>
                                        </div>
                                        <div class="statMetricsContainer">

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Bright Engram</div>
                                                    <div class="metricHeading">Progress</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Duo">
                                                        <div class="metricLarge" id="brightEngramProgressMetric">---,---</div>
                                                        <div class="metricSub">/500,000xp</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Season Progress</div>
                                                    <div class="metricHeading">Total</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Duo">
                                                        <div class="metricLarge" id="brightEngramsTotalSeasonalMetric">--</div>
                                                        <div class="metricSub">Engrams</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">All-time High</div>
                                                    <div class="metricHeading">Total</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Duo">
                                                        <div class="metricLarge" id="highestBrightEngramsTotalSeasonalMetric">--</div>
                                                        <div class="metricSub">Engrams</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="statContainer">
                                        <div class="statHeadingContainer">
                                            <div class="statContainerSubheading">General</div>
                                            <div class="statContainerMainHeading">XP Progression</div>
                                        </div>
                                        <div class="statMetricsContainer">

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Season Progress</div>
                                                    <div class="metricHeading">Total XP</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Single" style="margin-top: -45px;">
                                                        <div style="font-size: 90%;" id="seasonProgressXpMetric">---,---,---</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">All-time High</div>
                                                    <div class="metricHeading">Total XP</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Single" style="margin-top: -45px;">
                                                        <div style="font-size: 90%;" id="highestSeasonProgressXpMetric">---,---,---</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="metricHeaderContainer">
                                                    <div class="metricSubheading">Lifetime</div>
                                                    <div class="metricHeading">Total XP</div>
                                                </div>
                                                <div class="metricContainer backplate">
                                                    <img style="width: 100%;" src="./static/images/UI/metric_backplate_m.png">
                                                    <div class="backplateContainer-Single" style="margin-top: -45px;">
                                                        <div style="font-size: 90%;" id="lifetimeProgressXpMetric">---,---,---</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div id="toggleMetricHintsButton">
                                    <img class="toggleMetricHintIcon" src="./static/ico/hint_icon.svg">
                                    <div id="toggleMetricHintsButtonText">Hide Hints</div>
                                </div>
                            </div>
                        </div>

                    </div>
    
                </div>
            </div>
        </div>
    </div>

    <div id="notificationContainer">
        <div id="notificationTopBgLine"></div>
        <div id="notificationContent">
            <div>
                <div id="notificationTitle">Loading</div>
                <div id="notificationMessage">Loading user data</div>
            </div>
            <div class="spinner mini" id="loadingSpinner">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 62.08 71.68">
                    <g>
                        <polygon class="a" points="30.04 59.7 10.87 48.64 1 54.34 30.04 71.1 30.04 59.7"></polygon>
                        <polygon class="e" points="1 17.34 10.87 23.04 30.04 11.97 30.04 0.58 1 17.34"></polygon>
                        <polygon class="f" points="9.87 46.91 9.87 24.77 0 19.07 0 52.6 9.87 46.91"></polygon>
                        <polygon class="d" points="32.04 0.58 32.04 11.97 51.2 23.04 61.08 17.34 32.04 0.58"></polygon>
                        <polygon class="b" points="61.08 54.34 51.2 48.64 32.04 59.7 32.04 71.1 61.08 54.34"></polygon>
                        <polygon class="c" points="52.2 24.77 52.2 46.91 62.08 52.6 62.08 19.07 52.2 24.77"></polygon>
                    </g>
                    <g>
                        <polygon class="c" points="21.8 29.35 30.04 24.59 30.04 14.32 12.9 24.21 21.8 29.35"></polygon>
                        <polygon class="b" points="20.8 40.6 20.8 31.08 11.9 25.95 11.9 45.73 20.8 40.6"></polygon>
                        <polygon class="d" points="32.04 14.32 32.04 24.59 40.28 29.35 49.17 24.21 32.04 14.32"></polygon>
                        <polygon class="e" points="41.28 31.08 41.28 40.6 50.17 45.73 50.17 25.95 41.28 31.08"></polygon>
                        <polygon class="a" points="30.04 47.09 21.8 42.33 12.9 47.47 30.04 57.36 30.04 47.09"></polygon>
                        <polygon class="f" points="40.28 42.33 32.04 47.09 32.04 57.36 49.17 47.47 40.28 42.33"></polygon>
                    </g>
                </svg>
            </div>
            <div id="notificationCheckmark">
                <img src="./static/ico/icon_tick.svg">
            </div>
        </div>
    </div>

    <div class="warningTooltip" id="warningTooltip">This is still Alpha. Please report any errors to 
        <div class="warningTooltipLink" href="" onclick="window.open('https://twitter.com/_devbrendan', '_blank');">@brendanprice</div>
        <div style="margin-top: -2px;">‚ù§Ô∏è</div>
        <div class="warningTooltipLink hyperlinkBlue" href="" onclick="window.open('https://github.com/brendanprice2003/D2-Synergy/wiki/User-Guide#troubleshooting', '_blank');">Learn More</div>
        <img id="warningTooltipCloseButton" src="./static/ico/close.svg">
    </div>

    <div id="overlays"></div>

    <script type="module" src="scripts/user.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZMBD0LKPWR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());gtag('config', 'G-ZMBD0LKPWR');
    </script>
</body>